<table style='width:50%'>
    <tr>
      <th>Position</th>
      <th>Name</th>
      <th>Points</th>
      <th>Salary</th>
    </tr>

    <% Position.all.each do |position| %>
      <% if @team.get(position).nil? %>
        <tr class="player_profile">
          <th><%= position.name %></th>
          <th><%= render 'add_player' %></th>
        </tr>
      <% else %>
        <tr class="team_player" player_id="<%=@team.get(position).id %>">
          <th><%= position.name %></th>
          <th id="playerid-<%=@team.get(position).id%>"><a href="#" onclick="loadPlayer()"><%= @team.get(position).name %></a></th>
          <th><%= @team.get(position).points %></th>
          <th><%= @team.get(position).salary %></th>
          <th><%= render partial: 'delete_player', locals: {player: @team.get(position)} %></th>
        </tr>
      <% end %>
    <% end %>

  </table>

  <script id="player-template" type="text/x-handlebars-template">
    <h1>{{name}}</h1><br>
    <h3>{{position}}</h3><br>

    <h4>Salary: ${{salary}}</h4><br>
    <h4>Points: ${{points}}</h4><br>

    <h4>Stats</h4><br>
      <p>TDs: {{touchdowns}}</p><br>
      <p>Passing Yards: {{pass_yards}}</p><br>
      <p>Rushing Yards: {{rush_yards}}</p><br>
      <p>Receptions: {{receptions}}</p><br>
      <p>Receiving Yards: {{rec_yards}}</p><br>
  </script>

<script type="text/javascript" charset="utf-8">

</script>




  <script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
    var players = Array.from($('.team_player'))
    players.forEach(function (player) {
      player.addEventListener("click", showPlayerProfile(player))
    })
  })

  function showPlayerProfile(player) {
    var playerID = player.attributes.player_id.value
    var url = '/players/' + playerID
    $.get(url, loadPlayer(data))
  }

  function loadPlayer(data) {
    var player = {
      name: data.data.attributes.name
      position: data.data.attributes.position.name
      salary: data.data.attributes.salary
      points: data.data.attributes.points
      touchdowns: data.data.attributes.touchdowns
      pass_yards: data.data.attributes.pass_yards
      rush_yards: data.data.attributes.rush_yards
      receptions: data.data.attributes.receptions
      rec_yards: data.data.attributes.rec_yards
    }
   var template = Handlebars.compile(document.getElementById("player-template").innerHTML)
   var result = template(player)
 }
  //}

    //[0].attributes.player_id.value
  //function createNewTeamForm() {
  //  event.preventDefault();
  //  $('#newTeamForm').html("<%= j (render 'teams/new_team') %>")
  //}
  </script>
