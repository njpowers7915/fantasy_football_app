<table style='width:50%'>
    <tr>
      <th>Position</th>
      <th>Name</th>
      <th>Points</th>
      <th>Salary</th>
    </tr>

    <% Position.all.each do |position| %>
      <% if @team.get(position).nil? %>
        <tr class="player_profile">
          <th><%= position.name %></th>
          <th><%= render partial: 'add_player', locals: {position: position.name} %></th>
        </tr>
      <% else %>
        <tr id="playerid-<%=@team.get(position).id%>">
          <th><%= position.name %></th>
          <th><a href='#' onclick="loadPlayer('<%=@team.get(position).id%>')"><%= @team.get(position).name %></a></th>
          <th><%= @team.get(position).points %></th>
          <th><%= @team.get(position).salary %></th>
          <th><%= render partial: 'delete_player', locals: {player: @team.get(position)} %></th>
        </tr>
      <% end %>
    <% end %>

  </table>

  <script id="player-template" type="text/x-handlebars-template">
      <h1>{{name}}</h1><br>
      <h3>{{position}}</h3><br>

      <h4>Salary: ${{salary}}</h4><br>
      <h4>Points: ${{points}}</h4><br>

      <h4>Stats</h4><br>
        <p>TDs: {{touchdowns}}</p><br>
        <p>Passing Yards: {{pass_yards}}</p><br>
        <p>Rushing Yards: {{rush_yards}}</p><br>
        <p>Receptions: {{receptions}}</p><br>
        <p>Receiving Yards: {{rec_yards}}</p><br>
  </script>

<script type="text/javascript" charset="utf-8">
function loadPlayer(player_id) {
      event.preventDefault()
      var url = '/players/' + player_id
      $.getJSON(url, function(data) {
        var player = {
          name: data.data.attributes.name,
          position: data.data.attributes.position.name,
          salary: data.data.attributes.salary,
          points: data.data.attributes.points,
          touchdowns: data.data.attributes.touchdowns,
          pass_yards: data.data.attributes["pass-yards"],
          rush_yards: data.data.attributes["rush-yards"],
          receptions: data.data.attributes.receptions,
          rec_yards: data.data.attributes["rec-yards"]
        }
        var template = Handlebars.compile(document.getElementById("player-template").innerHTML)
        var result = template(player)
        var element = Array.from($('#playerid-' + data.data.id))
        debugger
        element[0].innerHTML = result
      })
      return false
    }
</script>
